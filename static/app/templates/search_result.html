{% if not res.cardno or res.card_is_legacy %}
    <label for="{{ res.id }}" data-phone-number="{{ res.number }}" data-user-id="{{ res.id }}" class="list-group-item search-result can-register-card{% if res.is_member == "1" %} member{% else %} not-member{% endif %}">
    <input type="radio" name="user" id="{{ res.id }}">
{% else %}
    <!-- Has card -->
    <div class="list-group-item search-result has-card{% if res.is_member %} member{% else %}not-member{% endif %}">
{% endif %}
<!-- Name -->
{{ res.firstname }} {{ res.lastname }}
<!-- Card label -->
{% if res.cardno and not res.card_is_legacy %}
    <span class="card label"><span class="glyphicon glyphicon-user"></span> {{ res.cardno }}</span>
{% else %}
    <span class="card label"><span class="glyphicon glyphicon-user"></span> No card</span>
{% endif %}
<!-- Membership label -->
{% if res.is_member == "1" %}
    <span class="label label-success">Member: {{res.expires|default('Lifelong')}}</span>
{% elif res.expires == "0000-00-00" %}
    <span class="label label-default">Registered</span>
{% else %}
    <span class="label label-warning">Expired: {{ res.expires }}</span>
{% endif %}
{% if not res.cardno or res.card_is_legacy %}
    </label>
{% else %}
    </div>
{% endif %}